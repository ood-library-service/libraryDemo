<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div>
        <span>isbn</span>
        <span th:text="${session.bookDetail.getIsbn()}"></span>

    </div>
    <div>
        <span>title</span>
        <span th:text="${session.bookDetail.getTitle()}"></span>
    </div>
    <div>
        <span>author</span>
        <span th:text="${session.bookDetail.getAuthor()}"></span>
    </div>
    <div >
        <th:block th:if="${session.bookDetail.getBookState() != 'available'}">
            <span >반납예정일</span>
            <span th:text="${session.bookDetail.getDateOut()}"></span>
        </th:block>

    </div>
    <div>
        <span>빌린사람</span>
        <span th:text="${session.bookDetail.getLoanUser()}"></span>
    </div>
    <div>
        <span>상태</span>
        <span th:text="${session.bookDetail.getBookState()}"></span>
    </div>

    <div>
        <form action="/library/loanBook" method="post">
            <input type="hidden" name ="isbn" th:value= "${session.bookDetail.getIsbn()}">
            <button th:if="${session.bookDetail.getBookState() == 'available'}" type="submit" >대출하기</button>
        </form>

        <form action="/library/extendBook" method="post">
            <input type="hidden" name ="isbn" th:value= "${session.bookDetail.getIsbn()}">
            <button th:if="${session.bookDetail.getBookState() == 'borrowed' && session.bookDetail.getLoanUser() == session.username}" >
                연장하기
            </button>
        </form>

        <form action="/library/returnBook" method="post">
            <input type="hidden" name ="isbn" th:value= "${session.bookDetail.getIsbn()}">
            <button
                    th:if="${(session.bookDetail.getBookState() == 'borrowed'
            || session.bookDetail.getBookState() == 'extend')
            && session.bookDetail.getLoanUser() == session.username}" >
                반납하기
            </button>
        </form>

    </div>
</body>
</html>